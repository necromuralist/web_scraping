<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Beautiful Soup Introduction &#8212; Web-Scraping Exploration 2017.10.02.a documentation</title>
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2017.10.02.a',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Test" href="test.html" />
    <link rel="prev" title="Web-Scraping Exploration" href="index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          Web-Scraping Exploration</a>
        <span class="navbar-text navbar-version pull-left"><b>2017.10.02</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Beautiful Soup Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="test.html">Test</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Beautiful Soup Introduction</a><ul>
<li><a class="reference internal" href="#introduction">1 Introduction</a></li>
<li><a class="reference internal" href="#imports-and-set-up">2 Imports and Set Up</a></li>
<li><a class="reference internal" href="#loading-the-page">3 Loading the Page</a></li>
<li><a class="reference internal" href="#using-css">4 Using CSS</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="index.html" title="Previous Chapter: Web-Scraping Exploration"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Web-Scraping ...</span>
    </a>
  </li>
  <li>
    <a href="test.html" title="Next Chapter: Test"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Test &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/01_beautiful_soup.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <div class="section" id="beautiful-soup-introduction">
<h1><a class="toc-backref" href="#id1">Beautiful Soup Introduction</a><a class="headerlink" href="#beautiful-soup-introduction" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#beautiful-soup-introduction" id="id1">Beautiful Soup Introduction</a><ul>
<li><a class="reference internal" href="#introduction" id="id2">1 Introduction</a></li>
<li><a class="reference internal" href="#imports-and-set-up" id="id3">2 Imports and Set Up</a></li>
<li><a class="reference internal" href="#loading-the-page" id="id4">3 Loading the Page</a></li>
<li><a class="reference internal" href="#using-css" id="id5">4 Using CSS</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id2">1 Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This is a basic introduction to using <a class="reference external" href="https://www.crummy.com/software/BeautifulSoup/">Beautiful Soup</a> to extract text from web pages.</p>
</div>
<div class="section" id="imports-and-set-up">
<h2><a class="toc-backref" href="#id3">2 Imports and Set Up</a><a class="headerlink" href="#imports-and-set-up" title="Permalink to this headline">¶</a></h2>
<div class="code ipython highlight-default"><div class="highlight"><pre><span></span><span class="c1"># pypi</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">from</span> <span class="nn">bs4</span> <span class="k">import</span> <span class="n">BeautifulSoup</span>
</pre></div>
</div>
<p>We’re going to be pulling the pages from the website set up for <em>Web Scraping With Python</em>.</p>
<div class="code ipython highlight-default"><div class="highlight"><pre><span></span><span class="n">URL</span> <span class="o">=</span> <span class="s2">&quot;http://www.pythonscraping.com/pages/&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="loading-the-page">
<h2><a class="toc-backref" href="#id4">3 Loading the Page</a><a class="headerlink" href="#loading-the-page" title="Permalink to this headline">¶</a></h2>
<p>This loads <code class="docutils literal"><span class="pre">page1</span></code> of the <code class="docutils literal"><span class="pre">www.pythonscraping.com</span></code> into a <a class="reference internal" href="autogenerated_api/bs4.BeautifulSoup.html#bs4.BeautifulSoup" title="bs4.BeautifulSoup"><code class="xref py py-class docutils literal"><span class="pre">bs4.BeautifulSoup</span></code></a> object and prints the first headline.</p>
<div class="code ipython highlight-default"><div class="highlight"><pre><span></span><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">URL</span> <span class="o">+</span> <span class="s2">&quot;page1.html&quot;</span><span class="p">)</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">soup</span><span class="o">.</span><span class="n">h1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">An</span> <span class="n">Interesting</span> <span class="n">Title</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="using-css">
<h2><a class="toc-backref" href="#id5">4 Using CSS</a><a class="headerlink" href="#using-css" title="Permalink to this headline">¶</a></h2>
<p>Because CSS tags classify what a section of HTML is, you can sometimes use it to sort out tags. This next example looks at a page that has the beginning of <em>War and Peace</em> with the dialog colored red and the names of characters colored green using css span tags.</p>
<p>.. ode:: html</p>
<p>‘&lt;span class=”green”&gt;Anna Pavlovna&lt;/span&gt;’</p>
<p>First we can grab the page and load it into Beautiful Soup.</p>
<div class="code ipython highlight-default"><div class="highlight"><pre><span></span><span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">URL</span> <span class="o">+</span> <span class="s2">&quot;warandpeace.html&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">response</span><span class="o">.</span><span class="n">ok</span>
<span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
</pre></div>
</div>
<p>To get all the character names we can use beautiful soup to find all the text surrounded by a <code class="docutils literal"><span class="pre">span</span></code> tag with the “green” class. I’ll just show the top-five.</p>
<div class="code ipython highlight-default"><div class="highlight"><pre><span></span><span class="n">names</span> <span class="o">=</span> <span class="n">soup</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;green&quot;</span><span class="p">})</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">[:</span><span class="mi">5</span><span class="p">]:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">get_text</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Anna</span> <span class="n">Pavlovna</span> <span class="n">Scherer</span>
<span class="n">Empress</span> <span class="n">Marya</span> <span class="n">Fedorovna</span>
<span class="n">Prince</span> <span class="n">Vasili</span> <span class="n">Kuragin</span>
<span class="n">Anna</span> <span class="n">Pavlovna</span>
<span class="n">St</span><span class="o">.</span> <span class="n">Petersburg</span>
</pre></div>
</div>
<p>So, the first thing we can see is that I described the content of the tags incorrectly, since <em>St. Petersburg</em> is a place, not a character name (I think, I haven’t actually read the text). The other thing to notice is that some of the names had newline characters in them (which is why I’m stripping them out before printing), so even after grabbing the text, there’s still some post processing to do.</p>
<p>Another thing to notice is that calling <code class="docutils literal"><span class="pre">BeautifulSoup.get_text</span></code> only returns the text within the tags, the tags themselves are stripped out. It will do this even if you grab a block of HTML that has nested HMTL tags within it.</p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017, cloistered monkey.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>