<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>bs4 &#8212; Web-Scraping Exploration 2017.10.02.a documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2017.10.02.a',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          Web-Scraping Exploration</a>
        <span class="navbar-text navbar-version pull-left"><b>2017.10.02</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../01_beautiful_soup.html">Beautiful Soup Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../beautiful_soup/index.html">Beautiful Soup</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"></ul>
</li>
              
            
            
              
                
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12 content">
      
  <h1>Source code for bs4</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Beautiful Soup</span>
<span class="sd">Elixir and Tonic</span>
<span class="sd">&quot;The Screen-Scraper&#39;s Friend&quot;</span>
<span class="sd">http://www.crummy.com/software/BeautifulSoup/</span>

<span class="sd">Beautiful Soup uses a pluggable XML or HTML parser to parse a</span>
<span class="sd">(possibly invalid) document into a tree representation. Beautiful Soup</span>
<span class="sd">provides methods and Pythonic idioms that make it easy to navigate,</span>
<span class="sd">search, and modify the parse tree.</span>

<span class="sd">Beautiful Soup works with Python 2.7 and up. It works better if lxml</span>
<span class="sd">and/or html5lib is installed.</span>

<span class="sd">For more than you ever wanted to know about Beautiful Soup, see the</span>
<span class="sd">documentation:</span>
<span class="sd">http://www.crummy.com/software/BeautifulSoup/bs4/doc/</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># Use of this source code is governed by a BSD-style license that can be</span>
<span class="c1"># found in the LICENSE file.</span>

<span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;Leonard Richardson (leonardr@segfault.org)&quot;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;4.6.0&quot;</span>
<span class="n">__copyright__</span> <span class="o">=</span> <span class="s2">&quot;Copyright (c) 2004-2017 Leonard Richardson&quot;</span>
<span class="n">__license__</span> <span class="o">=</span> <span class="s2">&quot;MIT&quot;</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;BeautifulSoup&#39;</span><span class="p">]</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">traceback</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="kn">from</span> <span class="nn">.builder</span> <span class="k">import</span> <span class="n">builder_registry</span><span class="p">,</span> <span class="n">ParserRejectedMarkup</span>
<span class="kn">from</span> <span class="nn">.dammit</span> <span class="k">import</span> <span class="n">UnicodeDammit</span>
<span class="kn">from</span> <span class="nn">.element</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">CData</span><span class="p">,</span>
    <span class="n">Comment</span><span class="p">,</span>
    <span class="n">DEFAULT_OUTPUT_ENCODING</span><span class="p">,</span>
    <span class="n">Declaration</span><span class="p">,</span>
    <span class="n">Doctype</span><span class="p">,</span>
    <span class="n">NavigableString</span><span class="p">,</span>
    <span class="n">PageElement</span><span class="p">,</span>
    <span class="n">ProcessingInstruction</span><span class="p">,</span>
    <span class="n">ResultSet</span><span class="p">,</span>
    <span class="n">SoupStrainer</span><span class="p">,</span>
    <span class="n">Tag</span><span class="p">,</span>
    <span class="p">)</span>

<span class="c1"># The very first thing we do is give a useful error if someone is</span>
<span class="c1"># running this code under Python 3 without converting it.</span>
<span class="s1">&#39;You are trying to run the Python 2 version of Beautiful Soup under Python 3. This will not work.&#39;</span><span class="o">!=</span><span class="s1">&#39;You need to convert the code, either by installing it (`python setup.py install`) or by running 2to3 (`2to3 -w bs4`).&#39;</span>

<div class="viewcode-block" id="BeautifulSoup"><a class="viewcode-back" href="../beautiful_soup/autogenerated_api/bs4.BeautifulSoup.html#bs4.BeautifulSoup">[docs]</a><span class="k">class</span> <span class="nc">BeautifulSoup</span><span class="p">(</span><span class="n">Tag</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This class defines the basic interface called by the tree builders.</span>

<span class="sd">    These methods will be called by the parser:</span>
<span class="sd">      reset()</span>
<span class="sd">      feed(markup)</span>

<span class="sd">    The tree builder may call these methods from its feed() implementation:</span>
<span class="sd">      handle_starttag(name, attrs) # See note about return value</span>
<span class="sd">      handle_endtag(name)</span>
<span class="sd">      handle_data(data) # Appends to the current data node</span>
<span class="sd">      endData(containerClass=NavigableString) # Ends the current data node</span>

<span class="sd">    No matter how complicated the underlying parser is, you should be</span>
<span class="sd">    able to build a tree using &#39;start tag&#39; events, &#39;end tag&#39; events,</span>
<span class="sd">    &#39;data&#39; events, and &quot;done with data&quot; events.</span>

<span class="sd">    If you encounter an empty-element tag (aka a self-closing tag,</span>
<span class="sd">    like HTML&#39;s &lt;br&gt; tag), call handle_starttag and then</span>
<span class="sd">    handle_endtag.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ROOT_TAG_NAME</span> <span class="o">=</span> <span class="s1">&#39;[document]&#39;</span>

    <span class="c1"># If the end-user gives no indication which tree builder they</span>
    <span class="c1"># want, look for one with these features.</span>
    <span class="n">DEFAULT_BUILDER_FEATURES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="s1">&#39;fast&#39;</span><span class="p">]</span>

    <span class="n">ASCII_SPACES</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\x20\x0a\x09\x0c\x0d</span><span class="s1">&#39;</span>

    <span class="n">NO_PARSER_SPECIFIED_WARNING</span> <span class="o">=</span> <span class="s2">&quot;No parser was explicitly specified, so I&#39;m using the best available </span><span class="si">%(markup_type)s</span><span class="s2"> parser for this system (</span><span class="se">\&quot;</span><span class="si">%(parser)s</span><span class="se">\&quot;</span><span class="s2">). This usually isn&#39;t a problem, but if you run this code on another system, or in a different virtual environment, it may use a different parser and behave differently.</span><span class="se">\n\n</span><span class="s2">The code that caused this warning is on line </span><span class="si">%(line_number)s</span><span class="s2"> of the file </span><span class="si">%(filename)s</span><span class="s2">. To get rid of this warning, change code that looks like this:</span><span class="se">\n\n</span><span class="s2"> BeautifulSoup(YOUR_MARKUP})</span><span class="se">\n\n</span><span class="s2">to this:</span><span class="se">\n\n</span><span class="s2"> BeautifulSoup(YOUR_MARKUP, </span><span class="se">\&quot;</span><span class="si">%(parser)s</span><span class="se">\&quot;</span><span class="s2">)</span><span class="se">\n</span><span class="s2">&quot;</span>

<div class="viewcode-block" id="BeautifulSoup.__init__"><a class="viewcode-back" href="../beautiful_soup/autogenerated_api/bs4.BeautifulSoup.html#bs4.BeautifulSoup.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">markup</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">builder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">parse_only</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">from_encoding</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">exclude_encodings</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The Soup object is initialized as the &#39;root tag&#39;, and the</span>
<span class="sd">        provided markup (which can be a string or a file-like object)</span>
<span class="sd">        is fed into the underlying parser.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="s1">&#39;convertEntities&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;BS4 does not respect the convertEntities argument to the &quot;</span>
                <span class="s2">&quot;BeautifulSoup constructor. Entities are always converted &quot;</span>
                <span class="s2">&quot;to Unicode characters.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;markupMassage&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;markupMassage&#39;</span><span class="p">]</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;BS4 does not respect the markupMassage argument to the &quot;</span>
                <span class="s2">&quot;BeautifulSoup constructor. The tree builder is responsible &quot;</span>
                <span class="s2">&quot;for any necessary markup massage.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;smartQuotesTo&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;smartQuotesTo&#39;</span><span class="p">]</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;BS4 does not respect the smartQuotesTo argument to the &quot;</span>
                <span class="s2">&quot;BeautifulSoup constructor. Smart quotes are always converted &quot;</span>
                <span class="s2">&quot;to Unicode characters.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;selfClosingTags&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;selfClosingTags&#39;</span><span class="p">]</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;BS4 does not respect the selfClosingTags argument to the &quot;</span>
                <span class="s2">&quot;BeautifulSoup constructor. The tree builder is responsible &quot;</span>
                <span class="s2">&quot;for understanding self-closing tags.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;isHTML&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;isHTML&#39;</span><span class="p">]</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;BS4 does not respect the isHTML argument to the &quot;</span>
                <span class="s2">&quot;BeautifulSoup constructor. Suggest you use &quot;</span>
                <span class="s2">&quot;features=&#39;lxml&#39; for HTML and features=&#39;lxml-xml&#39; for &quot;</span>
                <span class="s2">&quot;XML.&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">deprecated_argument</span><span class="p">(</span><span class="n">old_name</span><span class="p">,</span> <span class="n">new_name</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">old_name</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="s1">&#39;The &quot;</span><span class="si">%s</span><span class="s1">&quot; argument to the BeautifulSoup constructor &#39;</span>
                    <span class="s1">&#39;has been renamed to &quot;</span><span class="si">%s</span><span class="s1">.&quot;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">old_name</span><span class="p">,</span> <span class="n">new_name</span><span class="p">))</span>
                <span class="n">value</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">old_name</span><span class="p">]</span>
                <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">old_name</span><span class="p">]</span>
                <span class="k">return</span> <span class="n">value</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">parse_only</span> <span class="o">=</span> <span class="n">parse_only</span> <span class="ow">or</span> <span class="n">deprecated_argument</span><span class="p">(</span>
            <span class="s2">&quot;parseOnlyThese&quot;</span><span class="p">,</span> <span class="s2">&quot;parse_only&quot;</span><span class="p">)</span>

        <span class="n">from_encoding</span> <span class="o">=</span> <span class="n">from_encoding</span> <span class="ow">or</span> <span class="n">deprecated_argument</span><span class="p">(</span>
            <span class="s2">&quot;fromEncoding&quot;</span><span class="p">,</span> <span class="s2">&quot;from_encoding&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">from_encoding</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;You provided Unicode markup but also provided a value for from_encoding. Your from_encoding will be ignored.&quot;</span><span class="p">)</span>
            <span class="n">from_encoding</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">arg</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;__init__() got an unexpected keyword argument &#39;</span><span class="si">%s</span><span class="s2">&#39;&quot;</span> <span class="o">%</span> <span class="n">arg</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">builder</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">original_features</span> <span class="o">=</span> <span class="n">features</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">features</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">features</span> <span class="o">=</span> <span class="p">[</span><span class="n">features</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">features</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">features</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">features</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">DEFAULT_BUILDER_FEATURES</span>
            <span class="n">builder_class</span> <span class="o">=</span> <span class="n">builder_registry</span><span class="o">.</span><span class="n">lookup</span><span class="p">(</span><span class="o">*</span><span class="n">features</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">builder_class</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">FeatureNotFound</span><span class="p">(</span>
                    <span class="s2">&quot;Couldn&#39;t find a tree builder with the features you &quot;</span>
                    <span class="s2">&quot;requested: </span><span class="si">%s</span><span class="s2">. Do you need to install a parser library?&quot;</span>
                    <span class="o">%</span> <span class="s2">&quot;,&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">features</span><span class="p">))</span>
            <span class="n">builder</span> <span class="o">=</span> <span class="n">builder_class</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">original_features</span> <span class="o">==</span> <span class="n">builder</span><span class="o">.</span><span class="n">NAME</span> <span class="ow">or</span>
                    <span class="n">original_features</span> <span class="ow">in</span> <span class="n">builder</span><span class="o">.</span><span class="n">ALTERNATE_NAMES</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">builder</span><span class="o">.</span><span class="n">is_xml</span><span class="p">:</span>
                    <span class="n">markup_type</span> <span class="o">=</span> <span class="s2">&quot;XML&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">markup_type</span> <span class="o">=</span> <span class="s2">&quot;HTML&quot;</span>

                <span class="n">caller</span> <span class="o">=</span> <span class="n">traceback</span><span class="o">.</span><span class="n">extract_stack</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="n">caller</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">line_number</span> <span class="o">=</span> <span class="n">caller</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NO_PARSER_SPECIFIED_WARNING</span> <span class="o">%</span> <span class="nb">dict</span><span class="p">(</span>
                    <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
                    <span class="n">line_number</span><span class="o">=</span><span class="n">line_number</span><span class="p">,</span>
                    <span class="n">parser</span><span class="o">=</span><span class="n">builder</span><span class="o">.</span><span class="n">NAME</span><span class="p">,</span>
                    <span class="n">markup_type</span><span class="o">=</span><span class="n">markup_type</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">builder</span> <span class="o">=</span> <span class="n">builder</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">is_xml</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">is_xml</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">known_xml</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_xml</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">soup</span> <span class="o">=</span> <span class="bp">self</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parse_only</span> <span class="o">=</span> <span class="n">parse_only</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="s1">&#39;read&#39;</span><span class="p">):</span>        <span class="c1"># It&#39;s a file-type object.</span>
            <span class="n">markup</span> <span class="o">=</span> <span class="n">markup</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">markup</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">256</span> <span class="ow">and</span> <span class="p">(</span>
                <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="sa">b</span><span class="s1">&#39;&lt;&#39;</span> <span class="ow">in</span> <span class="n">markup</span><span class="p">)</span>
                <span class="ow">or</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="s1">&#39;&lt;&#39;</span> <span class="ow">in</span> <span class="n">markup</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="c1"># Print out warnings for a couple beginner problems</span>
            <span class="c1"># involving passing non-markup to Beautiful Soup.</span>
            <span class="c1"># Beautiful Soup will still parse the input as markup,</span>
            <span class="c1"># just in case that&#39;s what the user really wants.</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
                <span class="ow">and</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">supports_unicode_filenames</span><span class="p">):</span>
                <span class="n">possible_filename</span> <span class="o">=</span> <span class="n">markup</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf8&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">possible_filename</span> <span class="o">=</span> <span class="n">markup</span>
            <span class="n">is_file</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">is_file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">possible_filename</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="c1"># This is almost certainly a problem involving</span>
                <span class="c1"># characters not valid in filenames on this</span>
                <span class="c1"># system. Just let it go.</span>
                <span class="k">pass</span>
            <span class="k">if</span> <span class="n">is_file</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="n">markup</span> <span class="o">=</span> <span class="n">markup</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s2">&quot;utf8&quot;</span><span class="p">)</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot; looks like a filename, not markup. You should&#39;</span>
                    <span class="s1">&#39; probably open this file and pass the filehandle into&#39;</span>
                    <span class="s1">&#39; Beautiful Soup.&#39;</span> <span class="o">%</span> <span class="n">markup</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check_markup_is_url</span><span class="p">(</span><span class="n">markup</span><span class="p">)</span>

        <span class="k">for</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">markup</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">original_encoding</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">declared_html_encoding</span><span class="p">,</span>
         <span class="bp">self</span><span class="o">.</span><span class="n">contains_replacement_characters</span><span class="p">)</span> <span class="ow">in</span> <span class="p">(</span>
             <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">prepare_markup</span><span class="p">(</span>
                 <span class="n">markup</span><span class="p">,</span> <span class="n">from_encoding</span><span class="p">,</span> <span class="n">exclude_encodings</span><span class="o">=</span><span class="n">exclude_encodings</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_feed</span><span class="p">()</span>
                <span class="k">break</span>
            <span class="k">except</span> <span class="n">ParserRejectedMarkup</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="c1"># Clear out the markup and remove the builder&#39;s circular</span>
        <span class="c1"># reference to this object.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">markup</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">soup</span> <span class="o">=</span> <span class="kc">None</span></div>

    <span class="k">def</span> <span class="nf">__copy__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">copy</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">),</span> <span class="n">builder</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="p">,</span> <span class="n">from_encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span>
        <span class="p">)</span>

        <span class="c1"># Although we encoded the tree to UTF-8, that may not have</span>
        <span class="c1"># been the encoding of the original markup. Set the copy&#39;s</span>
        <span class="c1"># .original_encoding to reflect the original object&#39;s</span>
        <span class="c1"># .original_encoding.</span>
        <span class="n">copy</span><span class="o">.</span><span class="n">original_encoding</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">original_encoding</span>
        <span class="k">return</span> <span class="n">copy</span>

    <span class="k">def</span> <span class="nf">__getstate__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Frequently a tree builder can&#39;t be pickled.</span>
        <span class="n">d</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>
        <span class="k">if</span> <span class="s1">&#39;builder&#39;</span> <span class="ow">in</span> <span class="n">d</span> <span class="ow">and</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">picklable</span><span class="p">:</span>
            <span class="n">d</span><span class="p">[</span><span class="s1">&#39;builder&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">d</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_check_markup_is_url</span><span class="p">(</span><span class="n">markup</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; </span>
<span class="sd">        Check if markup looks like it&#39;s actually a url and raise a warning </span>
<span class="sd">        if so. Markup can be unicode or str (py2) / bytes (py3).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
            <span class="n">space</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39; &#39;</span>
            <span class="n">cant_start_with</span> <span class="o">=</span> <span class="p">(</span><span class="sa">b</span><span class="s2">&quot;http:&quot;</span><span class="p">,</span> <span class="sa">b</span><span class="s2">&quot;https:&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">space</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>
            <span class="n">cant_start_with</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;http:&quot;</span><span class="p">,</span> <span class="s2">&quot;https:&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">markup</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span> <span class="k">for</span> <span class="n">prefix</span> <span class="ow">in</span> <span class="n">cant_start_with</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">space</span> <span class="ow">in</span> <span class="n">markup</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">markup</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">):</span>
                    <span class="n">decoded_markup</span> <span class="o">=</span> <span class="n">markup</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="s1">&#39;replace&#39;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">decoded_markup</span> <span class="o">=</span> <span class="n">markup</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="s1">&#39;&quot;</span><span class="si">%s</span><span class="s1">&quot; looks like a URL. Beautiful Soup is not an&#39;</span>
                    <span class="s1">&#39; HTTP client. You should probably use an HTTP client like&#39;</span>
                    <span class="s1">&#39; requests to get the document behind the URL, and feed&#39;</span>
                    <span class="s1">&#39; that document to Beautiful Soup.&#39;</span> <span class="o">%</span> <span class="n">decoded_markup</span>
                <span class="p">)</span>

    <span class="k">def</span> <span class="nf">_feed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Convert the document to Unicode.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">feed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">markup</span><span class="p">)</span>
        <span class="c1"># Close out any unfinished strings and close all the open tags.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">endData</span><span class="p">()</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentTag</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ROOT_TAG_NAME</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">popTag</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">Tag</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ROOT_TAG_NAME</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_data</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentTag</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tagStack</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preserve_whitespace_tag_stack</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pushTag</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="BeautifulSoup.new_tag"><a class="viewcode-back" href="../beautiful_soup/autogenerated_api/bs4.BeautifulSoup.html#bs4.BeautifulSoup.new_tag">[docs]</a>    <span class="k">def</span> <span class="nf">new_tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">namespace</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nsprefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new tag associated with this soup.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Tag</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">namespace</span><span class="p">,</span> <span class="n">nsprefix</span><span class="p">,</span> <span class="n">attrs</span><span class="p">)</span></div>

<div class="viewcode-block" id="BeautifulSoup.new_string"><a class="viewcode-back" href="../beautiful_soup/autogenerated_api/bs4.BeautifulSoup.html#bs4.BeautifulSoup.new_string">[docs]</a>    <span class="k">def</span> <span class="nf">new_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">subclass</span><span class="o">=</span><span class="n">NavigableString</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create a new NavigableString associated with this soup.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">subclass</span><span class="p">(</span><span class="n">s</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">insert_before</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">successor</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;BeautifulSoup objects don&#39;t support insert_before().&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">insert_after</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">successor</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s2">&quot;BeautifulSoup objects don&#39;t support insert_after().&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">popTag</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">tag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tagStack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">preserve_whitespace_tag_stack</span> <span class="ow">and</span> <span class="n">tag</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">preserve_whitespace_tag_stack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">preserve_whitespace_tag_stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="c1">#print &quot;Pop&quot;, tag.name</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tagStack</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">currentTag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tagStack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentTag</span>

    <span class="k">def</span> <span class="nf">pushTag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tag</span><span class="p">):</span>
        <span class="c1">#print &quot;Push&quot;, tag.name</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentTag</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">currentTag</span><span class="o">.</span><span class="n">contents</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tagStack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">currentTag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tagStack</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">tag</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="o">.</span><span class="n">preserve_whitespace_tags</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">preserve_whitespace_tag_stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">endData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">containerClass</span><span class="o">=</span><span class="n">NavigableString</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_data</span><span class="p">:</span>
            <span class="n">current_data</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_data</span><span class="p">)</span>
            <span class="c1"># If whitespace is not preserved, and this string contains</span>
            <span class="c1"># nothing but ASCII spaces, replace it with a single space</span>
            <span class="c1"># or newline.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">preserve_whitespace_tag_stack</span><span class="p">:</span>
                <span class="n">strippable</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">current_data</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">i</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ASCII_SPACES</span><span class="p">:</span>
                        <span class="n">strippable</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="k">break</span>
                <span class="k">if</span> <span class="n">strippable</span><span class="p">:</span>
                    <span class="k">if</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="ow">in</span> <span class="n">current_data</span><span class="p">:</span>
                        <span class="n">current_data</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">current_data</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>

            <span class="c1"># Reset the data collector.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_data</span> <span class="o">=</span> <span class="p">[]</span>

            <span class="c1"># Should we add this string to the tree at all?</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_only</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tagStack</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="ow">and</span> \
                   <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_only</span><span class="o">.</span><span class="n">text</span> <span class="ow">or</span> \
                    <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_only</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">current_data</span><span class="p">)):</span>
                <span class="k">return</span>

            <span class="n">o</span> <span class="o">=</span> <span class="n">containerClass</span><span class="p">(</span><span class="n">current_data</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">object_was_parsed</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>

<div class="viewcode-block" id="BeautifulSoup.object_was_parsed"><a class="viewcode-back" href="../beautiful_soup/autogenerated_api/bs4.BeautifulSoup.html#bs4.BeautifulSoup.object_was_parsed">[docs]</a>    <span class="k">def</span> <span class="nf">object_was_parsed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">most_recent_element</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add an object to the parse tree.&quot;&quot;&quot;</span>
        <span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentTag</span>
        <span class="n">previous_element</span> <span class="o">=</span> <span class="n">most_recent_element</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_most_recent_element</span>

        <span class="n">next_element</span> <span class="o">=</span> <span class="n">previous_sibling</span> <span class="o">=</span> <span class="n">next_sibling</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">o</span><span class="p">,</span> <span class="n">Tag</span><span class="p">):</span>
            <span class="n">next_element</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">next_element</span>
            <span class="n">next_sibling</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">next_sibling</span>
            <span class="n">previous_sibling</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">previous_sibling</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">previous_element</span><span class="p">:</span>
                <span class="n">previous_element</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">previous_element</span>

        <span class="n">o</span><span class="o">.</span><span class="n">setup</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">previous_element</span><span class="p">,</span> <span class="n">next_element</span><span class="p">,</span> <span class="n">previous_sibling</span><span class="p">,</span> <span class="n">next_sibling</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_most_recent_element</span> <span class="o">=</span> <span class="n">o</span>
        <span class="n">parent</span><span class="o">.</span><span class="n">contents</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">o</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">parent</span><span class="o">.</span><span class="n">next_sibling</span><span class="p">:</span>
            <span class="c1"># This node is being inserted into an element that has</span>
            <span class="c1"># already been parsed. Deal with any dangling references.</span>
            <span class="n">index</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent</span><span class="o">.</span><span class="n">contents</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
            <span class="k">while</span> <span class="n">index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">parent</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="ow">is</span> <span class="n">o</span><span class="p">:</span>
                    <span class="k">break</span>
                <span class="n">index</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;Error building tree: supposedly </span><span class="si">%r</span><span class="s2"> was inserted &quot;</span>
                    <span class="s2">&quot;into </span><span class="si">%r</span><span class="s2"> after the fact, but I don&#39;t see it!&quot;</span> <span class="o">%</span> <span class="p">(</span>
                        <span class="n">o</span><span class="p">,</span> <span class="n">parent</span>
                    <span class="p">)</span>
                <span class="p">)</span>
            <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">previous_element</span> <span class="o">=</span> <span class="n">parent</span>
                <span class="n">previous_sibling</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">previous_element</span> <span class="o">=</span> <span class="n">previous_sibling</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="n">index</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">index</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">parent</span><span class="o">.</span><span class="n">contents</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="n">next_element</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">next_sibling</span>
                <span class="n">next_sibling</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">next_element</span> <span class="o">=</span> <span class="n">next_sibling</span> <span class="o">=</span> <span class="n">parent</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>

            <span class="n">o</span><span class="o">.</span><span class="n">previous_element</span> <span class="o">=</span> <span class="n">previous_element</span>
            <span class="k">if</span> <span class="n">previous_element</span><span class="p">:</span>
                <span class="n">previous_element</span><span class="o">.</span><span class="n">next_element</span> <span class="o">=</span> <span class="n">o</span>
            <span class="n">o</span><span class="o">.</span><span class="n">next_element</span> <span class="o">=</span> <span class="n">next_element</span>
            <span class="k">if</span> <span class="n">next_element</span><span class="p">:</span>
                <span class="n">next_element</span><span class="o">.</span><span class="n">previous_element</span> <span class="o">=</span> <span class="n">o</span>
            <span class="n">o</span><span class="o">.</span><span class="n">next_sibling</span> <span class="o">=</span> <span class="n">next_sibling</span>
            <span class="k">if</span> <span class="n">next_sibling</span><span class="p">:</span>
                <span class="n">next_sibling</span><span class="o">.</span><span class="n">previous_sibling</span> <span class="o">=</span> <span class="n">o</span>
            <span class="n">o</span><span class="o">.</span><span class="n">previous_sibling</span> <span class="o">=</span> <span class="n">previous_sibling</span>
            <span class="k">if</span> <span class="n">previous_sibling</span><span class="p">:</span>
                <span class="n">previous_sibling</span><span class="o">.</span><span class="n">next_sibling</span> <span class="o">=</span> <span class="n">o</span></div>

    <span class="k">def</span> <span class="nf">_popToTag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">nsprefix</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">inclusivePop</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Pops the tag stack up to and including the most recent</span>
<span class="sd">        instance of the given tag. If inclusivePop is false, pops the tag</span>
<span class="sd">        stack up to but *not* including the most recent instqance of</span>
<span class="sd">        the given tag.&quot;&quot;&quot;</span>
        <span class="c1">#print &quot;Popping to %s&quot; % name</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ROOT_TAG_NAME</span><span class="p">:</span>
            <span class="c1"># The BeautifulSoup object itself can never be popped.</span>
            <span class="k">return</span>

        <span class="n">most_recently_popped</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">stack_size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tagStack</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">stack_size</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tagStack</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">name</span> <span class="o">==</span> <span class="n">t</span><span class="o">.</span><span class="n">name</span> <span class="ow">and</span> <span class="n">nsprefix</span> <span class="o">==</span> <span class="n">t</span><span class="o">.</span><span class="n">prefix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">inclusivePop</span><span class="p">:</span>
                    <span class="n">most_recently_popped</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popTag</span><span class="p">()</span>
                <span class="k">break</span>
            <span class="n">most_recently_popped</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">popTag</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">most_recently_popped</span>

<div class="viewcode-block" id="BeautifulSoup.handle_starttag"><a class="viewcode-back" href="../beautiful_soup/autogenerated_api/bs4.BeautifulSoup.html#bs4.BeautifulSoup.handle_starttag">[docs]</a>    <span class="k">def</span> <span class="nf">handle_starttag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">namespace</span><span class="p">,</span> <span class="n">nsprefix</span><span class="p">,</span> <span class="n">attrs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Push a start tag on to the stack.</span>

<span class="sd">        If this method returns None, the tag was rejected by the</span>
<span class="sd">        SoupStrainer. You should proceed as if the tag had not occurred</span>
<span class="sd">        in the document. For instance, if this was a self-closing tag,</span>
<span class="sd">        don&#39;t call handle_endtag.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># print &quot;Start tag %s: %s&quot; % (name, attrs)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">endData</span><span class="p">()</span>

        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_only</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tagStack</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span>
            <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_only</span><span class="o">.</span><span class="n">text</span>
                 <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_only</span><span class="o">.</span><span class="n">search_tag</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">attrs</span><span class="p">))):</span>
            <span class="k">return</span> <span class="kc">None</span>

        <span class="n">tag</span> <span class="o">=</span> <span class="n">Tag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">builder</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">namespace</span><span class="p">,</span> <span class="n">nsprefix</span><span class="p">,</span> <span class="n">attrs</span><span class="p">,</span>
                  <span class="bp">self</span><span class="o">.</span><span class="n">currentTag</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_most_recent_element</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">tag</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">tag</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_most_recent_element</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_most_recent_element</span><span class="o">.</span><span class="n">next_element</span> <span class="o">=</span> <span class="n">tag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_most_recent_element</span> <span class="o">=</span> <span class="n">tag</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pushTag</span><span class="p">(</span><span class="n">tag</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">tag</span></div>

    <span class="k">def</span> <span class="nf">handle_endtag</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">nsprefix</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1">#print &quot;End tag: &quot; + name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">endData</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_popToTag</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">nsprefix</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">handle_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<div class="viewcode-block" id="BeautifulSoup.decode"><a class="viewcode-back" href="../beautiful_soup/autogenerated_api/bs4.BeautifulSoup.html#bs4.BeautifulSoup.decode">[docs]</a>    <span class="k">def</span> <span class="nf">decode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pretty_print</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
               <span class="n">eventual_encoding</span><span class="o">=</span><span class="n">DEFAULT_OUTPUT_ENCODING</span><span class="p">,</span>
               <span class="n">formatter</span><span class="o">=</span><span class="s2">&quot;minimal&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a string or Unicode representation of this document.</span>
<span class="sd">        To get Unicode, pass None for encoding.&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_xml</span><span class="p">:</span>
            <span class="c1"># Print the XML declaration</span>
            <span class="n">encoding_part</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="k">if</span> <span class="n">eventual_encoding</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">encoding_part</span> <span class="o">=</span> <span class="s1">&#39; encoding=&quot;</span><span class="si">%s</span><span class="s1">&quot;&#39;</span> <span class="o">%</span> <span class="n">eventual_encoding</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;&lt;?xml version=&quot;1.0&quot;</span><span class="si">%s</span><span class="s1">?&gt;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">encoding_part</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">pretty_print</span><span class="p">:</span>
            <span class="n">indent_level</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">indent_level</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">return</span> <span class="n">prefix</span> <span class="o">+</span> <span class="nb">super</span><span class="p">(</span><span class="n">BeautifulSoup</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span>
            <span class="n">indent_level</span><span class="p">,</span> <span class="n">eventual_encoding</span><span class="p">,</span> <span class="n">formatter</span><span class="p">)</span></div></div>

<span class="c1"># Alias to make it easier to type import: &#39;from bs4 import _soup&#39;</span>
<span class="n">_s</span> <span class="o">=</span> <span class="n">BeautifulSoup</span>
<span class="n">_soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span>

<span class="k">class</span> <span class="nc">BeautifulStoneSoup</span><span class="p">(</span><span class="n">BeautifulSoup</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Deprecated interface to an XML parser.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;features&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;xml&#39;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s1">&#39;The BeautifulStoneSoup class is deprecated. Instead of using &#39;</span>
            <span class="s1">&#39;it, pass features=&quot;xml&quot; into the BeautifulSoup constructor.&#39;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">BeautifulStoneSoup</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">StopParsing</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="k">class</span> <span class="nc">FeatureNotFound</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="c1">#By default, act as an HTML pretty-printer.</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">sys</span>
    <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">stdin</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">soup</span><span class="o">.</span><span class="n">prettify</span><span class="p">())</span>
</pre></div>

    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017, cloistered monkey.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>